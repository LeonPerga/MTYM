var DESCRIPTORS = require('core-js/internals/descriptors');
var MISSED_STICKY = require('core-js/internals/regexp-sticky-helpers').MISSED_STICKY;
var classof = require('core-js/internals/classof-raw');
var defineBuiltInAccessor = require('core-js/internals/define-built-in-accessor');
var getInternalState = require('core-js/internals/internal-state').get;

var RegExpPrototype = RegExp.prototype;
var $TypeError = TypeError;

// `RegExp.prototype.sticky` getter
// https://tc39.es/ecma262/#sec-get-regexp.prototype.sticky
if (DESCRIPTORS && MISSED_STICKY) {
  defineBuiltInAccessor(RegExpPrototype, 'sticky', {
    configurable: true,
    get: function sticky() {
      if (this === RegExpPrototype) return undefined;
      // We can't use InternalStateModule.getterFor because
      // we don't add metadata for regexps created by a literal.
      if (classof(this) === 'RegExp') {
        return !!getInternalState(this).sticky;
      }
      throw $TypeError('Incompatible receiver, RegExp required');
    }
  });
}
